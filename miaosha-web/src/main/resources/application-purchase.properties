# 抢购消息队列配置
#purchase.message.exchange=miaosha.purchase.exchange
#purchase.message.routing.key=miaosha.purchase
#purchase.message.queue=miaosha.purchase.queue
#purchase.message.delayed.exchange=purchase.delayed.exchange
#purchase.message.delayed.routing.key=purchase.delayed
#purchase.message.delayed.queue=purchase.delayed.queue

# 抢购结果缓存配置
purchase.message.result.expire.hours=24

# 消息队列连接配置
spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest
spring.rabbitmq.virtual-host=/
# 启用发布者确认机制，确保消息成功发送到交换机
spring.rabbitmq.publisher-confirm-type=correlated
# 启用发布者返回机制，当消息无法路由到队列时触发回调
spring.rabbitmq.publisher-returns=true

# 消息队列监听器配置
spring.rabbitmq.listener.simple.retry.enabled=true
spring.rabbitmq.listener.simple.retry.initial-interval=1000
spring.rabbitmq.listener.simple.retry.max-attempts=3
spring.rabbitmq.listener.simple.retry.multiplier=1.0
spring.rabbitmq.listener.simple.retry.max-interval=10000
spring.rabbitmq.listener.simple.default-requeue-rejected=true

# 消息确认配置
spring.rabbitmq.listener.simple.acknowledge-mode=manual
spring.rabbitmq.listener.simple.prefetch=10

# 顺序消费配置 - 提高并发处理能力
spring.rabbitmq.listener.simple.concurrency=10
spring.rabbitmq.listener.simple.max-concurrency=20

# 消息监听器详细配置
spring.rabbitmq.listener.simple.missing-queues-fatal=false